import{a as L}from"./chunk-FEM247ZK.js";import{c as A,h as G,q as k}from"./chunk-Y3WRGRHF.js";import{$ as n,Ab as d,B as D,Bb as B,C as F,Cb as N,Ga as l,I,Ib as z,Ka as T,La as M,Oa as c,P as x,Q as O,Qa as s,T as E,Ua as w,Wb as j,Za as V,_a as _,a as b,cb as $,gb as p,gc as H,hb as m,j as a,na as R,ob as u,pb as P,q as y,ra as o,u as S,x as C}from"./chunk-U7UGUVDU.js";var q=e=>({"font-variation-settings":e}),J=class e{icon=o("");size=o(1);filled=o(!1);getFilledValue(){return`'FILL' ${this.filled()?1:0}`}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=c({type:e,selectors:[["app-icon"]],inputs:{icon:[1,"icon"],size:[1,"size"],filled:[1,"filled"]},decls:2,vars:6,consts:[[1,"material-symbols-outlined","flex","flex--center",3,"ngStyle"]],template:function(t,i){t&1&&(p(0,"span",0),d(1),m()),t&2&&(_("font-size",i.size(),"rem"),V("ngStyle",z(4,q,i.getFilledValue())),l(),B(i.icon()))},dependencies:[H],encapsulation:2,changeDetection:0})};var g=class e{formGroup=o();formSubmit$=new a;listenOnSubmit(){this.formGroup()?.markAllAsTouched(),this.formSubmit$.next()}static \u0275fac=function(t){return new(t||e)};static \u0275dir=s({type:e,selectors:[["form","formGroup",""]],hostBindings:function(t,i){t&1&&u("submit",function(){return i.listenOnSubmit()})},inputs:{formGroup:[1,"formGroup"]}})};function Q(e,r){if(e&1&&d(0),e&2){let t=P();N(" ",t.errorText()," ")}}var v=class e{error=o("");errorParams=o(null);validationErrors=o({});defaultValidationErrors=n(L);errorText=j(()=>{let r=b(b({},this.validationErrors()),this.defaultValidationErrors);return r[this.error()],(this.errorParams()?r[this.error()].replace(/{{(\w+)}}/g,(i,h)=>this.errorParams()?.[h]??""):r[this.error()])??r.default});static \u0275fac=function(t){return new(t||e)};static \u0275cmp=c({type:e,selectors:[["app-error"]],inputs:{error:[1,"error"],errorParams:[1,"errorParams"],validationErrors:[1,"validationErrors"]},decls:2,vars:1,consts:[[1,"error"]],template:function(t,i){t&1&&(p(0,"p",0),w(1,Q,1,1),m()),t&2&&(l(),$(i.error()?1:-1))},styles:[".error[_ngcontent-%COMP%]{font-size:.9rem;color:var(--error-color)}"],changeDetection:0})};var U=class e{validationErrors=o({});erorrComponent;formSubmitDirective=n(g);control=n(G);viewContainerRef=n(M);destroyRef=n(R);initializeErrorState$=new a;listenOnBlur(){this.initializeErrorState$.next()}listenFormSubmit$=C(()=>this.formSubmitDirective.formSubmit$.pipe(E(()=>this.initializeErrorState$.next())));listenControlStatusChange$=C(()=>S([this.control.valueChanges.pipe(x(this.control.value)),this.initializeErrorState$]).pipe(F(()=>!!this.control.touched),O(()=>y(this.control.errors)),I((r,t)=>JSON.stringify(r)===JSON.stringify(t)),E(r=>this.updateErrorMessage(r))));ngOnInit(){this.initErrorComponent(),D(this.listenFormSubmit$,this.listenControlStatusChange$).pipe(k(this.destroyRef)).subscribe()}initErrorComponent(){this.erorrComponent=this.viewContainerRef.createComponent(v),this.erorrComponent.setInput("validationErrors",this.validationErrors)}updateErrorMessage(r){this.erorrComponent.setInput("error",r?this.getFirstErrorMessage():""),this.erorrComponent.setInput("errorParams",r?this.getFirstErrorMessageParams():null)}getFirstErrorMessage(){let r=this.control.errors;return r===null?"":Object.keys(r)[0]}getFirstErrorMessageParams(){let r=this.control.errors;if(r===null)return null;let t=Object.values(r)[0],i=Object.keys(t)[0];return typeof t[i]=="boolean"?null:t}static \u0275fac=function(t){return new(t||e)};static \u0275dir=s({type:e,selectors:[["","formControl",""]],hostBindings:function(t,i){t&1&&u("blur",function(){return i.listenOnBlur()})},inputs:{validationErrors:[1,"validationErrors"]}})};var K=class e{constructor(r){this.ngControl=r;r.valueAccessor=this}static nextId=0;static generateControlId(){return`control-${e.nextId++}`}label=o("");validationErrors=o({});formControl;id=e.generateControlId();_value;_disabled=!1;onChange=r=>{};onTouch=()=>{};ngOnInit(){this.formControl=this.ngControl.control}writeValue(r){this._value=r,this.onChange(r)}registerOnChange(r){this.onChange=r}registerOnTouched(r){this.onTouch=r}setDisabledState(r){this._disabled=r}static \u0275fac=function(t){return new(t||e)(T(A))};static \u0275dir=s({type:e,inputs:{label:[1,"label"],validationErrors:[1,"validationErrors"]}})};export{J as a,g as b,U as c,K as d};
